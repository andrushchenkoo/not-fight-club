(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const a=window.localStorage,j=document.querySelector(".registration"),k=document.querySelector(".registration__button"),C=document.querySelector(".registration__input"),H=document.querySelector(".home-page"),G=document.querySelector(".character-page"),F=document.querySelector(".settings-page"),V=document.querySelector(".header"),w=document.querySelector(".battle-page__character-name");function K(){const e=C.value;a.setItem("characterName",e),D.textContent=a.getItem("characterName"),f.textContent=e,w.textContent=e,j.classList.add("close"),H.classList.remove("close"),V.classList.remove("close")}function Y(){C.value?k.disabled=!1:k.disabled=!0}C.addEventListener("input",Y);k.addEventListener("click",K);const z=document.querySelector(".header__icon--home"),J=document.querySelector(".header__icon--character"),Q=document.querySelector(".header__icon--settings"),L=document.querySelectorAll(".section"),S=document.querySelector(".header__page-name");function R(){L.forEach(e=>e.classList.add("close")),H.classList.remove("close"),S.textContent="Main"}function P(){L.forEach(e=>e.classList.add("close")),G.classList.remove("close"),S.textContent="Character",D.textContent=a.getItem("characterName")}function U(){L.forEach(e=>e.classList.add("close")),F.classList.remove("close"),S.textContent="Settings"}z.addEventListener("click",R);J.addEventListener("click",P);Q.addEventListener("click",U);const W=document.querySelector(".home-page__button"),X=document.querySelector(".battle-page");function ee(){_.classList.contains("close")||ke(),L.forEach(e=>e.classList.add("close")),X.classList.remove("close"),S.textContent="Battle"}W.addEventListener("click",ee);const te=document.querySelector(".chars-selection"),ne=document.querySelector(".character-page__avatar"),ce=document.querySelector(".character-page__avatar-img"),oe=document.querySelectorAll(".chars-selection__item-avatar"),D=document.querySelector(".character-page__character-name"),ae=document.querySelector(".chars-selection__close");a.getItem("wins")===null&&a.setItem("wins",0);a.getItem("loses")===null&&a.setItem("loses",0);const q=document.querySelector(".wins-value"),E=document.querySelector(".loses-value");q.textContent=a.getItem("wins");E.textContent=a.getItem("loses");function M(){te.classList.toggle("close")}oe.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("src");ce.setAttribute("src",t),ue.setAttribute("src",t)})});ne.addEventListener("click",M);ae.addEventListener("click",M);const d=document.querySelector(".settings-page__button"),f=document.querySelector(".settings-page__player-name"),u=document.querySelector(".settings-page__input");function se(){u.value?d.disabled=!1:d.disabled=!0}function re(){if(d.textContent==="Edit")f.classList.add("settings-page__player-name--close"),u.classList.add("settings-page__input--open"),u.setAttribute("value",a.getItem("characterName")),d.textContent="Save";else{f.classList.remove("settings-page__player-name--close"),u.classList.remove("settings-page__input--open"),d.textContent="Edit";const e=u.value;a.setItem("characterName",e),f.textContent=e,w.textContent=e}}u.addEventListener("input",se);d.addEventListener("click",re);const y=document.querySelector(".battle-settings__button"),i=document.querySelector(".battle-page__log-block"),le=document.querySelectorAll(".battle-settings__input--attack"),ie=document.querySelectorAll(".battle-settings__input--defence"),ue=document.querySelector(".battle-page__character-img");function de(){qe()}const b=Array.from(le),v=Array.from(ie);function Z(){const e=b.filter(n=>n.checked).map(n=>n.value),t=v.filter(n=>n.checked).map(n=>n.value);e.length===1&&t.length===2?y.disabled=!1:y.disabled=!0}b.forEach(e=>e.addEventListener("change",Z));v.forEach(e=>e.addEventListener("change",Z));y.addEventListener("click",de);const me=["Head","Neck","Body","Belly","Legs"],ge=["Head","Neck","Body","Belly","Legs"],A=document.querySelector(".hero__progress"),I=document.querySelector(".enemy__progress"),_=document.querySelector(".end-board"),N=document.querySelector(".end-board__text"),pe=document.querySelector(".end-board__close"),he=document.querySelector(".battle-page__character-name--enemy"),fe=document.querySelector(".battle-page__character-img--enemy"),B=10,ye=100,_e=100;let p=100,h=100;const Le={name:"Madara",countAttackZones:2,countDefenceZones:1,img:"./assets/images/enemies/1.jpg"},Se={name:"Pain",countAttackZones:1,countDefenceZones:3,img:"./assets/images/enemies/2.jpg"},be={name:"Itachi",countAttackZones:2,countDefenceZones:2,img:"./assets/images/enemies/3.jpg"},O=[Le,Se,be];function T(e){let[t]=x(e,1);return he.textContent=t.name,fe.setAttribute("src",t.img),t}let l=T(O);function x(e,t){const n=[...e];for(let r=n.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[n[r],n[o]]=[n[o],n[r]]}return n.slice(0,t)}function $(e,t){return e.filter(n=>t.includes(n)).length}function m(e,t){e.querySelector(".progress__fill").style.width=`${t}%`,e.querySelector(".progress__text").textContent=`${t}/ 100`}function ve(){P()}pe.addEventListener("click",ve);function ke(){p=ye,h=_e,m(A,p),m(I,h),i.innerHTML="",b.forEach(e=>e.checked=!1),v.forEach(e=>e.checked=!1),y.disabled=!0,_.classList.add("close"),l=T(O)}m(A,100);m(I,100);function qe(){const e=b.filter(c=>c.checked).map(c=>c.value),t=v.filter(c=>c.checked).map(c=>c.value),n=x(me,l.countAttackZones),r=x(ge,l.countDefenceZones),o=B*(e.length-$(e,r)),s=B*(n.length-$(n,t));if(p-=s,h-=o,m(A,p),m(I,h),p<=0&&(a.setItem("loses",E.textContent=+E.textContent+1),_.classList.remove("close"),N.textContent="You lost. Don't overdo it, maybe you'll get lucky in love"),h<=0&&(a.setItem("wins",q.textContent=+q.textContent+1),_.classList.remove("close"),N.textContent="Congratulations on your victory!"),i.scrollTop=i.scrollHeight,r.includes(e[0])){let c=document.createElement("p");c.innerHTML=`<span>${a.getItem("characterName")}</span> attacked <span>${l.name}</span> to <span>${e[0]}</span> but <span>${l.name}</span> was able to protect his ${e[0]}.`,i.append(c)}else{let c=document.createElement("p");c.innerHTML=`<span>${a.getItem("characterName")}</span> attacked <span>${l.name}</span> to <span>${e[0]}</span> and deal <span>10 damage</span>.`,i.append(c)}for(let c of n)if(t.includes(c)){let g=document.createElement("p");g.innerHTML=`<span>${l.name}</span> attacked <span>${a.getItem("characterName")}</span> to <span>${c}</span> but <span>${a.getItem("characterName")}</span> was able to protect his ${c}.`,i.append(g)}else{let g=document.createElement("p");g.innerHTML=`<span>${l.name}</span> attacked <span>${a.getItem("characterName")}</span> to <span>${c}</span> and deal <span>10 damage</span>.`,i.append(g)}}
